# 📁 Semi Design 文件管理页面 · 重构版 Spec v2.0

> UI 框架：Semi Design
> 适用场景：后台管理系统 / 文件资源管理
> 页面类型：CRUD 列表 + 抽屉表单
> 权限模型：用户级数据隔离（openid）

---

## 一、页面目标（Goal）

提供一个 **可查询、可新增、可编辑、可删除** 的文件管理页面，支持：

* 文件元信息管理
* 文件上传与替换
* 分页展示
* 操作安全与状态反馈

---

## 二、数据模型（Data Model）

### 2.1 文件实体（FileEntity）

| 字段名         | 类型       | 是否必填 | 说明                      |
| ----------- | -------- | ---- | ----------------------- |
| id          | string   | 是    | 文件唯一 ID                 |
| name        | string   | 是    | 文件名称                    |
| description | string   | 否    | 文件描述                    |
| type        | enum     | 是    | 文件类型：PDF / Word / Excel |
| fileUrl     | string   | 是    | 文件存储地址                  |
| createdAt   | datetime | 是    | 创建时间                    |
| updatedAt   | datetime | 是    | 更新时间                    |
| openid      | string   | 是    | 用户唯一标识（数据隔离）            |

---

## 三、页面结构（Layout）

```
┌──────────────────────────────────────┐
│ 查询区域                             │
│ [文件名称输入框] [查询] [重置]        │
├──────────────────────────────────────┤
│ 操作区               [+ 新增文件]     │
├──────────────────────────────────────┤
│ 列表区（Table + Pagination）          │
│  ├ 名称 | 描述 | 类型 | 创建时间 | 操作 │
│  ├ 编辑 / 删除                        │
├──────────────────────────────────────┤
│ 空状态 / 加载状态                    │
└──────────────────────────────────────┘
```

---

## 四、功能模块说明

---

### 4.1 查询功能（Search）

**交互说明**

* 默认按「文件名称」模糊查询
* 支持重置条件
* 列表结果分页展示
* 默认按 `createdAt DESC` 排序

**字段**

* 文件名称（Input）

**状态**

* 查询中：Table 显示 Loading
* 无结果：展示 Empty 状态

---

### 4.2 新增文件（Create）

**入口**

* 点击「+ 新增文件」按钮

**展现形式**

* 右侧 Drawer 抽屉

**表单字段**

| 字段   | 说明     | 校验 |
| ---- | ------ | -- |
| 文件名称 | 输入框    | 必填 |
| 文件描述 | 文本域    | 可选 |
| 文件类型 | Select | 必填 |
| 文件上传 | Upload | 必填 |

**行为**

* 提交成功 → 关闭抽屉 + 刷新列表
* 提交失败 → Toast 错误提示
* 提交中 → 按钮 Loading

---

### 4.3 编辑文件（Update）

**入口**

* 点击列表行中的「编辑」

**规则**

* 表单数据回填
* 主按钮文案变为「更新文件」
* 支持替换文件

**额外能力**

* 点击「取消编辑」：

  * 关闭抽屉
  * 清空表单
  * 重置为新增状态

---

### 4.4 删除文件（Delete）

**入口**

* 点击列表行中的「删除」

**交互**

1. 弹出确认对话框
2. 用户确认后执行删除
3. 删除成功刷新列表

**安全策略**

* 二次确认
* 删除中显示 Loading
* 删除失败提示错误原因

---

## 五、列表设计（Table）

### 列字段

| 列名   | 说明      |
| ---- | ------- |
| 文件名称 | 主字段     |
| 文件描述 | 可为空     |
| 文件类型 | Tag 显示  |
| 创建时间 | 格式化显示   |
| 操作   | 编辑 / 删除 |

---

## 六、状态与反馈（UX）

### 全局交互规范

* ✅ Loading：查询 / 新增 / 更新 / 删除
* ✅ Success Toast：操作成功
* ❌ Error Toast：操作失败
* ⚠️ 删除确认弹窗：防止误删

---

## 七、数据安全与隔离（Security）

* 文件仅可访问当前用户 openid 数据
* 上传文件生成唯一文件名（UUID / 时间戳）
* 文件存储至云存储（OSS / COS / S3）
* 编辑态明确标识「更新」而非「添加」

---

## 八、推荐组件（Semi Design）

| 场景   | 组件                    |
| ---- | --------------------- |
| 页面布局 | Layout / Card         |
| 查询   | Form / Input / Button |
| 列表   | Table / Pagination    |
| 表单   | Form / Drawer         |
| 上传   | Upload                |
| 提示   | Toast / Modal         |
| 状态   | Empty / Spin          |

---

## 九、可扩展项（Optional）

* 文件预览（PDF / Office Viewer）
* 文件下载
* 类型多选筛选
* 批量删除
* 权限控制（只读 / 可编辑）

---

## 十、完成标准（Definition of Done）

* CRUD 功能完整
* 表单校验齐全
* 状态反馈清晰
* 无越权数据访问
* UI 符合 Semi Design 规范

---
